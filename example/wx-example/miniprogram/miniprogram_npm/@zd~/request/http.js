"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("axios"),t=require("qs"),s=require("./shared.js");class r{axiosInstance;baseConfig;constructor(t,s){this.baseConfig={...t},this.axiosInstance=e.create(this.baseConfig);const{request:r,response:a,requestError:n,responseError:o}=s||{};this.axiosInstance.interceptors.request.use((async e=>await(r?.(e)||e)),n),this.axiosInstance.interceptors.response.use((e=>a?.(e)||e),(e=>o?.(e)||Promise.reject(e)))}uploadFile(e,t={}){const r=new window.FormData,a=t.name||"file";return t.filename?r.append(a,t.file,t.filename):r.append(a,t.file),t.data&&Object.keys(t.data).forEach((e=>{const s=t.data[e];Array.isArray(s)?s.forEach((t=>{r.append(`${e}[]`,t)})):r.append(e,t.data[e])})),this.axiosInstance.request({...e,method:"POST",data:r,headers:{"Content-type":s.ContentTypeEnum.FORM_DATA}})}formatFormData(e){const r=e.headers||this.baseConfig.headers;return(r?.["Content-Type"]||r?.["content-type"])!==s.ContentTypeEnum.FORM_URLENCODED||e.data&&"object"==typeof e.data&&Object.keys(e.data.length)||e.method?.toUpperCase()===s.RequestMethodsEnum.GET?e:{...e,data:t.stringify(e.data,{arrayFormat:"brackets"})}}get(e){return this.request({...e,method:"get"})}post(e){return this.request({...e,method:"post"})}put(e){return this.request({...e,method:"put"})}delete(e){return this.request({...e,method:"delete"})}request(e){const t=s.merge({},this.baseConfig,this.formatFormData(e));return this.axiosInstance.request(t)}}exports.HttpRequest=r,exports.default=r;
