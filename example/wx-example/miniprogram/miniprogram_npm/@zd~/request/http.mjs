import e from"axios";import t from"qs";import{ContentTypeEnum as s,RequestMethodsEnum as a,merge as r}from"./shared.mjs";class o{axiosInstance;baseConfig;constructor(t,s){this.baseConfig={...t},this.axiosInstance=e.create(this.baseConfig);const{request:a,response:r,requestError:o,responseError:n}=s||{};this.axiosInstance.interceptors.request.use((async e=>await(a?.(e)||e)),o),this.axiosInstance.interceptors.response.use((e=>r?.(e)||e),(e=>n?.(e)||Promise.reject(e)))}uploadFile(e,t={}){const a=new window.FormData,r=t.name||"file";return t.filename?a.append(r,t.file,t.filename):a.append(r,t.file),t.data&&Object.keys(t.data).forEach((e=>{const s=t.data[e];Array.isArray(s)?s.forEach((t=>{a.append(`${e}[]`,t)})):a.append(e,t.data[e])})),this.axiosInstance.request({...e,method:"POST",data:a,headers:{"Content-type":s.FORM_DATA}})}formatFormData(e){const r=e.headers||this.baseConfig.headers;return(r?.["Content-Type"]||r?.["content-type"])!==s.FORM_URLENCODED||e.data&&"object"==typeof e.data&&Object.keys(e.data.length)||e.method?.toUpperCase()===a.GET?e:{...e,data:t.stringify(e.data,{arrayFormat:"brackets"})}}get(e){return this.request({...e,method:"get"})}post(e){return this.request({...e,method:"post"})}put(e){return this.request({...e,method:"put"})}delete(e){return this.request({...e,method:"delete"})}request(e){const t=r({},this.baseConfig,this.formatFormData(e));return this.axiosInstance.request(t)}}export{o as HttpRequest,o as default};
